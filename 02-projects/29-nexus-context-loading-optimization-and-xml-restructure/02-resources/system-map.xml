<nexus-system-map version="v1.0">
<!--
================================================================================
NEXUS SYSTEM MAP - CORE STRUCTURE & NAVIGATION
================================================================================
Purpose: Navigate Nexus structure and understand execution flow
Context: Injected when Claude needs to understand system organization
Token Budget: ~500 tokens (core essentials only)
================================================================================
-->

<core-structure>
  <directory path="00-system/">
    <purpose>System framework and core workflows</purpose>
    <core path="00-system/core/">
      <file name="orchestrator.md" purpose="Behavior rules, routing"/>
      <file name="nexus-loader.py" purpose="Context injection script"/>
    </core>
    <skills path="00-system/skills/">
      <purpose>System workflows (plan-project, execute-project, close-session)</purpose>
    </skills>
  </directory>

  <directory path="01-memory/">
    <purpose>Context persistence across sessions</purpose>
    <file name="goals.md" purpose="User identity, role, preferences"/>
    <directory name="session-reports/" purpose="Historical session summaries"/>
  </directory>

  <directory path="02-projects/">
    <purpose>BUILD mode work - temporal deliverables</purpose>
    <pattern>{ID}-{name}/</pattern>
    <structure>
      <directory name="01-planning/" purpose="4-phase planning (overview, discovery, plan, steps)"/>
      <directory name="02-resources/" purpose="Reference materials"/>
      <directory name="03-working/" purpose="Work in progress"/>
      <directory name="04-outputs/" purpose="Final deliverables"/>
    </structure>
  </directory>

  <directory path="03-skills/">
    <purpose>EXECUTE mode work - reusable workflows</purpose>
    <pattern>{skill-name}/SKILL.md</pattern>
    <priority>User skills override system (Priority 2), except core utilities</priority>
  </directory>

  <directory path="04-workspace/">
    <purpose>User content and custom organization</purpose>
    <file name="workspace-map.md" purpose="Documents custom folder structure"/>
  </directory>
</core-structure>

<execution-flow>
  <step order="1" name="Session Starts" timing="0ms">
    <description>User opens Claude Code or session resumes</description>
  </step>

  <step order="2" name="Hook Injects Context" timing="<200ms">
    <components>
      <component name="orchestrator.md" purpose="Behavior rules"/>
      <component name="skills-catalog" purpose="Available workflows"/>
      <component name="active-projects" purpose="Current work"/>
      <component name="user-goals" purpose="Identity"/>
      <component name="dynamic-instructions" purpose="State-aware next action"/>
    </components>
  </step>

  <step order="3" name="Claude Executes">
    <routing>
      <condition>BUILD work</condition>
      <action>plan-project or execute-project</action>
    </routing>
    <routing>
      <condition>EXECUTE work</condition>
      <action>Load skill</action>
    </routing>
    <routing>
      <condition>Unclear</condition>
      <action>Display menu</action>
    </routing>
  </step>
</execution-flow>

<quick-decisions>
  <rule>
    <user-says>Build X / Create X</user-says>
    <action>plan-project</action>
  </rule>
  <rule>
    <user-says>Continue project {ID}</user-says>
    <action>execute-project</action>
  </rule>
  <rule>
    <user-says>Send slack message</user-says>
    <action>Load skill</action>
  </rule>
  <rule>
    <user-says>What can you do?</user-says>
    <action>Display menu</action>
  </rule>
</quick-decisions>

<file-locations>
  <lookup>
    <need>Behavior rules</need>
    <path>00-system/core/orchestrator.md</path>
  </lookup>
  <lookup>
    <need>User identity</need>
    <path>01-memory/goals.md</path>
  </lookup>
  <lookup>
    <need>Project work</need>
    <path>02-projects/{ID}-{name}/</path>
  </lookup>
  <lookup>
    <need>Workflows</need>
    <path>03-skills/{name}/SKILL.md</path>
  </lookup>
  <lookup>
    <need>User content</need>
    <path>04-workspace/</path>
  </lookup>
</file-locations>

<cli-commands>
  <command name="Load project context">
    <syntax>python 00-system/core/nexus-loader.py --project {ID}</syntax>
  </command>
  <command name="Load skill">
    <syntax>python 00-system/core/nexus-loader.py --skill {name}</syntax>
  </command>
  <command name="Discover skills in category">
    <syntax>load-skill {category} --help</syntax>
  </command>
</cli-commands>

<progressive-disclosure>
  <note>This is the CORE. Everything else loads on-demand.</note>
  <advanced-topics>
    <topic name="Hook System Details" load-when="Debugging context injection"/>
    <topic name="Integration Architecture" load-when="Building integrations"/>
    <topic name="Mental Models Catalog" load-when="Planning complex projects"/>
  </advanced-topics>
</progressive-disclosure>

</nexus-system-map>
